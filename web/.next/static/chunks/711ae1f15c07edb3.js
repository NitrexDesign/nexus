(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3243,e=>{"use strict";let t=()=>{let e=localStorage.getItem("nexus_server_url");return e||""};async function r(e,i={}){let n=t(),a=e.startsWith("http")?e:`${n}${e}`;return await fetch(a,i)}function i(e){if(!e)return"";if(e.startsWith("http")||e.startsWith("data:"))return e;let r=t();return`${r}${e}`}e.s(["apiFetch",()=>r,"resolveUrl",()=>i])},87092,e=>{"use strict";var t=e.i(90177);e.s(["Loader2",()=>t.default])},42280,e=>{"use strict";var t=e.i(57715),r=e.i(81232),i=e.i(17553),n=e.i(74943),a=e.i(32242),s=e.i(15488),o=e.i(84062),l=e.i(66407),c=e.i(51652),u=e.i(88653),d="Tabs",[h,p]=(0,n.createContextScope)(d,[a.createRovingFocusGroupScope]),f=(0,a.createRovingFocusGroupScope)(),[m,g]=h(d),b=r.forwardRef((e,r)=>{let{__scopeTabs:i,value:n,onValueChange:a,defaultValue:s,orientation:h="horizontal",dir:p,activationMode:f="automatic",...g}=e,b=(0,l.useDirection)(p),[w,y]=(0,c.useControllableState)({prop:n,onChange:a,defaultProp:s??"",caller:d});return(0,t.jsx)(m,{scope:i,baseId:(0,u.useId)(),value:w,onValueChange:y,orientation:h,dir:b,activationMode:f,children:(0,t.jsx)(o.Primitive.div,{dir:b,"data-orientation":h,...g,ref:r})})});b.displayName=d;var w="TabsList",y=r.forwardRef((e,r)=>{let{__scopeTabs:i,loop:n=!0,...s}=e,l=g(w,i),c=f(i);return(0,t.jsx)(a.Root,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:n,children:(0,t.jsx)(o.Primitive.div,{role:"tablist","aria-orientation":l.orientation,...s,ref:r})})});y.displayName=w;var R="TabsTrigger",x=r.forwardRef((e,r)=>{let{__scopeTabs:n,value:s,disabled:l=!1,...c}=e,u=g(R,n),d=f(n),h=A(u.baseId,s),p=C(u.baseId,s),m=s===u.value;return(0,t.jsx)(a.Item,{asChild:!0,...d,focusable:!l,active:m,children:(0,t.jsx)(o.Primitive.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":p,"data-state":m?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:h,...c,ref:r,onMouseDown:(0,i.composeEventHandlers)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():u.onValueChange(s)}),onKeyDown:(0,i.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&u.onValueChange(s)}),onFocus:(0,i.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==u.activationMode;m||l||!e||u.onValueChange(s)})})})});x.displayName=R;var E="TabsContent",v=r.forwardRef((e,i)=>{let{__scopeTabs:n,value:a,forceMount:l,children:c,...u}=e,d=g(E,n),h=A(d.baseId,a),p=C(d.baseId,a),f=a===d.value,m=r.useRef(f);return r.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(s.Presence,{present:l||f,children:({present:r})=>(0,t.jsx)(o.Primitive.div,{"data-state":f?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":h,hidden:!r,id:p,tabIndex:0,...u,ref:i,style:{...e.style,animationDuration:m.current?"0s":void 0},children:r&&c})})});function A(e,t){return`${e}-trigger-${t}`}function C(e,t){return`${e}-content-${t}`}v.displayName=E;var O=e.i(65833);function T({className:e,...r}){return(0,t.jsx)(b,{"data-slot":"tabs",className:(0,O.cn)("flex flex-col gap-2",e),...r})}function S({className:e,...r}){return(0,t.jsx)(y,{"data-slot":"tabs-list",className:(0,O.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...r})}function N({className:e,...r}){return(0,t.jsx)(x,{"data-slot":"tabs-trigger",className:(0,O.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function P({className:e,...r}){return(0,t.jsx)(v,{"data-slot":"tabs-content",className:(0,O.cn)("flex-1 outline-none",e),...r})}e.s(["Tabs",()=>T,"TabsContent",()=>P,"TabsList",()=>S,"TabsTrigger",()=>N],42280)},98837,e=>{"use strict";e.i(93957);var t=e.i(57715),r=e.i(81232),i=e.i(8523),n=e.i(79945),a=e.i(61827),s=e.i(95551),o=e.i(75467),l=r,c=e.i(31862);function u(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class d extends l.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,o.isHTMLElement)(e)&&e.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=r-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:i,anchorX:n,root:a}){let s=(0,l.useId)(),o=(0,l.useRef)(null),h=(0,l.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=(0,l.useContext)(c.MotionConfigContext),f=function(...e){return r.useCallback(function(...e){return t=>{let r=!1,i=e.map(e=>{let i=u(e,t);return r||"function"!=typeof i||(r=!0),i});if(r)return()=>{for(let t=0;t<i.length;t++){let r=i[t];"function"==typeof r?r():u(e[t],null)}}}}(...e),e)}(o,e?.ref);return(0,l.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:l,right:c}=h.current;if(i||!o.current||!e||!t)return;let u="left"===n?`left: ${l}`:`right: ${c}`;o.current.dataset.motionPopId=s;let d=document.createElement("style");p&&(d.nonce=p);let f=a??document.head;return f.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${u}px !important;
            top: ${r}px !important;
          }
        `),()=>{f.contains(d)&&f.removeChild(d)}},[i]),(0,t.jsx)(d,{isPresent:i,childRef:o,sizeRef:h,children:l.cloneElement(e,{ref:f})})}let p=({children:e,initial:i,isPresent:a,onExitComplete:o,custom:l,presenceAffectsLayout:c,mode:u,anchorX:d,root:p})=>{let m=(0,n.useConstant)(f),g=(0,r.useId)(),b=!0,w=(0,r.useMemo)(()=>(b=!1,{id:g,initial:i,isPresent:a,custom:l,onExitComplete:e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;o&&o()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[a,m,o]);return c&&b&&(w={...w}),(0,r.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[a]),r.useEffect(()=>{a||m.size||!o||o()},[a]),"popLayout"===u&&(e=(0,t.jsx)(h,{isPresent:a,anchorX:d,root:p,children:e})),(0,t.jsx)(s.PresenceContext.Provider,{value:w,children:e})};function f(){return new Map}var m=e.i(37905);let g=e=>e.key||"";function b(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let w=({children:e,custom:s,initial:o=!0,onExitComplete:l,presenceAffectsLayout:c=!0,mode:u="sync",propagate:d=!1,anchorX:h="left",root:f})=>{let[w,y]=(0,m.usePresence)(d),R=(0,r.useMemo)(()=>b(e),[e]),x=d&&!w?[]:R.map(g),E=(0,r.useRef)(!0),v=(0,r.useRef)(R),A=(0,n.useConstant)(()=>new Map),[C,O]=(0,r.useState)(R),[T,S]=(0,r.useState)(R);(0,a.useIsomorphicLayoutEffect)(()=>{E.current=!1,v.current=R;for(let e=0;e<T.length;e++){let t=g(T[e]);x.includes(t)?A.delete(t):!0!==A.get(t)&&A.set(t,!1)}},[T,x.length,x.join("-")]);let N=[];if(R!==C){let e=[...R];for(let t=0;t<T.length;t++){let r=T[t],i=g(r);x.includes(i)||(e.splice(t,0,r),N.push(r))}return"wait"===u&&N.length&&(e=N),S(b(e)),O(R),null}let{forceRender:P}=(0,r.useContext)(i.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:T.map(e=>{let r=g(e),i=(!d||!!w)&&(R===T||x.includes(r));return(0,t.jsx)(p,{isPresent:i,initial:(!E.current||!!o)&&void 0,custom:s,presenceAffectsLayout:c,mode:u,root:f,onExitComplete:i?void 0:()=>{if(!A.has(r))return;A.set(r,!0);let e=!0;A.forEach(t=>{t||(e=!1)}),e&&(P?.(),S(v.current),d&&y?.(),l&&l())},anchorX:h,children:e},r)})})};e.s(["AnimatePresence",()=>w],98837)},36534,e=>{"use strict";var t=e.i(81232),r=e.i(23484),i=e.i(33520),n=e.i(29587),a=e.i(2375),s=class extends n.Subscribable{#e;#t=void 0;#r;#i;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,a.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,a.hashKey)(t.mutationKey)!==(0,a.hashKey)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#a()}mutate(e,t){return this.#i=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#n(){let e=this.#r?.state??(0,r.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){i.notifyManager.batch(()=>{if(this.#i&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#i.onSuccess?.(e.data,t,r,i)}catch(e){Promise.reject(e)}try{this.#i.onSettled?.(e.data,null,t,r,i)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#i.onError?.(e.error,t,r,i)}catch(e){Promise.reject(e)}try{this.#i.onSettled?.(void 0,e.error,t,r,i)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#t)})})}},o=e.i(72222);function l(e,r){let n=(0,o.useQueryClient)(r),[l]=t.useState(()=>new s(n,e));t.useEffect(()=>{l.setOptions(e)},[l,e]);let c=t.useSyncExternalStore(t.useCallback(e=>l.subscribe(i.notifyManager.batchCalls(e)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),u=t.useCallback((e,t)=>{l.mutate(e,t).catch(a.noop)},[l]);if(c.error&&(0,a.shouldThrowError)(l.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:u,mutateAsync:c.mutate}}e.s(["useMutation",()=>l],36534)},91644,e=>{"use strict";var t=e.i(57715),r=e.i(81232),i=e.i(93740),n=e.i(18855),a=e.i(67464),s=e.i(40203),o=e.i(42280),l=e.i(1186),c=e.i(3243);async function u(e){let t=await (0,c.apiFetch)(`/api/auth/register/begin?username=${e}`);if(!t.ok)throw Error(await t.text());return t.json()}async function d(e,t){let r=await (0,c.apiFetch)(`/api/auth/register/finish?username=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error(await r.text());return r.json()}async function h(e){let t=await (0,c.apiFetch)(`/api/auth/login/begin?username=${e}`);if(!t.ok)throw Error(await t.text());return t.json()}async function p(e,t){let r=await (0,c.apiFetch)(`/api/auth/login/finish?username=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error(await r.text());return r.json()}async function f(e,t){let r=await (0,c.apiFetch)("/api/auth/login/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!r.ok)throw Error(await r.text());return r.json()}async function m(e,t){let r=await (0,c.apiFetch)("/api/auth/register/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!r.ok)throw Error(await r.text());return r.json()}function g(e){let t=new Uint8Array(e),r="";for(let e of t)r+=String.fromCharCode(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function b(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4,i=atob(t.padEnd(t.length+r,"=")),n=new ArrayBuffer(i.length),a=new Uint8Array(n);for(let e=0;e<i.length;e++)a[e]=i.charCodeAt(e);return n}function w(){return y.stubThis(globalThis?.PublicKeyCredential!==void 0&&"function"==typeof globalThis.PublicKeyCredential)}let y={stubThis:e=>e};function R(e){let{id:t}=e;return{...e,id:b(t),transports:e.transports}}function x(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}class E extends Error{constructor({message:e,code:t,cause:r,name:i}){super(e,{cause:r}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i??r.name,this.code=t}}let v=new class{constructor(){Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}createNewAbortSignal(){if(this.controller){let e=Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}},A=["cross-platform","platform"];function C(e){if(e&&!(0>A.indexOf(e)))return e}async function O(e){let t,r,i,n,a;!e.optionsJSON&&e.challenge&&(console.warn("startRegistration() was not called correctly. It will try to continue with the provided options, but this call should be refactored to use the expected call structure instead. See https://simplewebauthn.dev/docs/packages/browser#typeerror-cannot-read-properties-of-undefined-reading-challenge for more information."),e={optionsJSON:e});let{optionsJSON:s,useAutoRegister:o=!1}=e;if(!w())throw Error("WebAuthn is not supported in this browser");let l={...s,challenge:b(s.challenge),user:{...s.user,id:b(s.user.id)},excludeCredentials:s.excludeCredentials?.map(R)},c={};o&&(c.mediation="conditional"),c.publicKey=l,c.signal=v.createNewAbortSignal();try{t=await navigator.credentials.create(c)}catch(e){throw function({error:e,options:t}){let{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new E({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(r.authenticatorSelection?.requireResidentKey===!0)return new E({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});else if("conditional"===t.mediation&&r.authenticatorSelection?.userVerification==="required")return new E({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});else if(r.authenticatorSelection?.userVerification==="required")return new E({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else if("InvalidStateError"===e.name)return new E({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});else if("NotAllowedError"===e.name)return new E({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("NotSupportedError"===e.name)return new E(0===r.pubKeyCredParams.filter(e=>"public-key"===e.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});else if("SecurityError"===e.name){let t=globalThis.location.hostname;if(!x(t))return new E({message:`${globalThis.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rp.id!==t)return new E({message:`The RP ID "${r.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(r.user.id.byteLength<1||r.user.id.byteLength>64)return new E({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new E({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return e}({error:e,options:c})}if(!t)throw Error("Registration was not completed");let{id:u,rawId:d,response:h,type:p}=t;if("function"==typeof h.getTransports&&(i=h.getTransports()),"function"==typeof h.getPublicKeyAlgorithm)try{n=h.getPublicKeyAlgorithm()}catch(e){T("getPublicKeyAlgorithm()",e)}if("function"==typeof h.getPublicKey)try{let e=h.getPublicKey();null!==e&&(a=g(e))}catch(e){T("getPublicKey()",e)}if("function"==typeof h.getAuthenticatorData)try{r=g(h.getAuthenticatorData())}catch(e){T("getAuthenticatorData()",e)}return{id:u,rawId:g(d),response:{attestationObject:g(h.attestationObject),clientDataJSON:g(h.clientDataJSON),transports:i,publicKeyAlgorithm:n,publicKey:a,authenticatorData:r},type:p,clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:C(t.authenticatorAttachment)}}function T(e,t){console.warn(`The browser extension that intercepted this WebAuthn API call incorrectly implemented ${e}. You should report this error to them.
`,t)}let S=e=>e;async function N(e){let t,r,i;!e.optionsJSON&&e.challenge&&(console.warn("startAuthentication() was not called correctly. It will try to continue with the provided options, but this call should be refactored to use the expected call structure instead. See https://simplewebauthn.dev/docs/packages/browser#typeerror-cannot-read-properties-of-undefined-reading-challenge for more information."),e={optionsJSON:e});let{optionsJSON:n,useBrowserAutofill:a=!1,verifyBrowserAutofillInput:s=!0}=e;if(!w())throw Error("WebAuthn is not supported in this browser");n.allowCredentials?.length!==0&&(t=n.allowCredentials?.map(R));let o={...n,challenge:b(n.challenge),allowCredentials:t},l={};if(a){if(!await function(){if(!w())return S(new Promise(e=>e(!1)));let e=globalThis.PublicKeyCredential;return e?.isConditionalMediationAvailable===void 0?S(new Promise(e=>e(!1))):S(e.isConditionalMediationAvailable())}())throw Error("Browser does not support WebAuthn autofill");if(document.querySelectorAll("input[autocomplete$='webauthn']").length<1&&s)throw Error('No <input> with "webauthn" as the only or last value in its `autocomplete` attribute was detected');l.mediation="conditional",o.allowCredentials=[]}l.publicKey=o,l.signal=v.createNewAbortSignal();try{r=await navigator.credentials.get(l)}catch(e){throw function({error:e,options:t}){let{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new E({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("NotAllowedError"===e.name)return new E({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("SecurityError"===e.name){let t=globalThis.location.hostname;if(!x(t))return new E({message:`${globalThis.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new E({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new E({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return e}({error:e,options:l})}if(!r)throw Error("Authentication was not completed");let{id:c,rawId:u,response:d,type:h}=r;return d.userHandle&&(i=g(d.userHandle)),{id:c,rawId:g(u),response:{authenticatorData:g(d.authenticatorData),clientDataJSON:g(d.clientDataJSON),signature:g(d.signature),userHandle:i},type:h,clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:C(r.authenticatorAttachment)}}var P=e.i(49771),j=e.i(87092),I=e.i(88344),_=e.i(98837),M=e.i(36534),D=e.i(72222);function U({onLogin:e}){let[c,g]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),[y,R]=(0,r.useState)("login"),x=(0,D.useQueryClient)(),E=(0,M.useMutation)({mutationFn:async()=>{if(!c)throw Error("Please enter a username");if(b)return await m(c,b),"Account created! You can now authenticate.";{let e=await u(c),t=await O({optionsJSON:e});return await d(c,t),"Identity profile initialized! You can now authenticate."}},onSuccess:e=>l.toast.success(e),onError:e=>l.toast.error(e instanceof Error?e.message:"Failed to initialize account")}),v=(0,M.useMutation)({mutationFn:async()=>{if(!c)throw Error("Please enter your username");if(b)await f(c,b);else{let e=await h(c),t=await N({optionsJSON:e});await p(c,t)}return{username:c}},onSuccess:t=>{l.toast.success("Access granted. Welcome back."),e(t),x.invalidateQueries()},onError:e=>l.toast.error(e instanceof Error?e.message:"Authentication verification failed")}),A=E.isPending||v.isPending;return(0,t.jsx)("div",{className:"min-h-screen bg-background flex flex-col overflow-hidden",children:(0,t.jsxs)("div",{className:"flex-1 flex items-center justify-center p-6 relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-grid-white/[0.02] -z-10"}),(0,t.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-primary/5 rounded-full blur-3xl -z-10"}),(0,t.jsx)(I.motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:20,stiffness:100},className:"w-full max-w-[480px]",children:(0,t.jsxs)(n.Card,{className:"w-full shadow-2xl border-primary/10",children:[(0,t.jsxs)(n.CardHeader,{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto bg-primary/10 w-12 h-12 rounded-2xl flex items-center justify-center mb-4",children:(0,t.jsx)(P.Server,{className:"text-primary h-6 w-6"})}),(0,t.jsx)(n.CardTitle,{className:"text-3xl font-black tracking-tight",children:"Welcome"}),(0,t.jsx)(n.CardDescription,{className:"text-base",children:"Your secure portal to the digital ether."})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)(o.Tabs,{value:y,onValueChange:R,className:"space-y-6",children:[(0,t.jsxs)(o.TabsList,{className:"grid w-full grid-cols-2 rounded-xl p-1 bg-muted/50",children:[(0,t.jsx)(o.TabsTrigger,{value:"login",className:"rounded-lg font-bold",children:"Login"}),(0,t.jsx)(o.TabsTrigger,{value:"register",className:"rounded-lg font-bold",children:"Register"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"username",className:"text-sm font-bold ml-1",children:"Username"}),(0,t.jsx)(a.Input,{id:"username",placeholder:"e.g. kieran",value:c,onChange:e=>g(e.target.value),className:"h-12 rounded-xl border-muted-foreground/20 focus-visible:ring-primary shadow-sm"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"password",className:"text-sm font-bold ml-1",children:"Password (Optional)"}),(0,t.jsx)(a.Input,{id:"password",type:"password",placeholder:"leave blank for passkey",value:b,onChange:e=>w(e.target.value),className:"h-12 rounded-xl border-muted-foreground/20 focus-visible:ring-primary shadow-sm"})]}),(0,t.jsx)(_.AnimatePresence,{mode:"wait",children:"login"===y?(0,t.jsx)(I.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:(0,t.jsx)(i.Button,{className:"w-full h-12 rounded-xl text-base font-bold shadow-lg shadow-primary/20",onClick:()=>v.mutate(),disabled:A,children:A?(0,t.jsx)(j.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}):b?"Login with Password":"Authenticate with Passkey"})},"login"):(0,t.jsx)(I.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:(0,t.jsx)(i.Button,{variant:"outline",className:"w-full h-12 rounded-xl text-base font-bold border-2 hover:bg-primary/5 hover:text-primary hover:border-primary/30 transition-all",onClick:()=>E.mutate(),disabled:A,children:A?(0,t.jsx)(j.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}):b?"Register with Password":"Initialize Identity Profile"})},"register")})]})]})})]})})]})})}e.s(["Auth",()=>U],91644)},33605,e=>{e.n(e.i(91644))}]);